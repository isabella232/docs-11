<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="no-js ie6"><![endif]-->
<!--[if IE 7 ]><html class="no-js ie7"><![endif]-->
<!--[if IE 8 ]><html class="no-js ie8"><![endif]-->
<!--[if IE 9 ]><html class="no-js ie9"><![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    
      
        <title>Transmitting Data - Quiet Modem Project</title>
      
      
      
      
    
    <meta property="og:url" content="">
    <meta property="og:title" content="Quiet Modem Project">
    <meta property="og:image" content="https://avatars2.githubusercontent.com/u/17815378?v=3&s=200">
    <meta name="apple-mobile-web-app-title" content="Quiet Modem Project">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
      <link rel="apple-touch-icon" href="https://avatars2.githubusercontent.com/u/17815378?v=3&s=200">
    
    <link rel="shortcut icon" type="image/x-icon" href="../assets/images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="../assets/images/favicon.ico">
    <style>
      @font-face {
      	font-family: 'Icon';
      	src: url('../assets/fonts/icon.eot?52m981');
      	src: url('../assets/fonts/icon.eot?#iefix52m981')
               format('embedded-opentype'),
      		   url('../assets/fonts/icon.woff?52m981')
               format('woff'),
      		   url('../assets/fonts/icon.ttf?52m981')
               format('truetype'),
      		   url('../assets/fonts/icon.svg?52m981#icon')
               format('svg');
      	font-weight: normal;
      	font-style: normal;
      }
    </style>
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
    <link rel="stylesheet" href="../assets/stylesheets/application-prettified.css">
    
    
      
      
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
      <style>
        body, input {
          font-family: 'Roboto', 'Helvetica Neue', Helvetica, Arial, sans-serif;
        }
        pre, code {
          font-family: 'Roboto Mono', 'Courier New', 'Courier', monospace;
        }
      </style>
    
    <link rel="stylesheet" href="../assets/stylesheets/select.css">
    
    <script src="../assets/javascripts/modernizr-4ab42b99fd.js"></script>
    
  </head>
  
  
  
  <body class=" ">
    
      
      
    
    <div class="backdrop">
      <div class="backdrop-paper"></div>
    </div>
    <input class="toggle" type="checkbox" id="toggle-drawer">
    <input class="toggle" type="checkbox" id="toggle-search">
    <label class="toggle-button overlay" for="toggle-drawer"></label>
    <header class="header">
      <nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        
        Transmitting Data
      </div>
    </div>
    
    
    <div class="button button-search" role="button" aria-label="Search">
      <label class="toggle-button icon icon-search" title="Search" for="toggle-search"></label>
    </div>
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
    </header>
    <main class="main">
      
      <div class="drawer">
        <nav aria-label="Navigation">
  
  <a href="https://github.com/quiet/quiet-js" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="https://avatars2.githubusercontent.com/u/17815378?v=3&s=200">
        </div>
      
      <div class="name">
        <strong>
          Quiet Modem Project
          <span class="version">
            
          </span>
        </strong>
        
          <br>
          quiet/quiet-js
        
      </div>
    </div>
  </a>
  <div class="scrollable">
    <div class="project-select">
      <select>
        
        
        <option  data-url="https://quiet.github.io/docs/quiet/transmitting/">C</option>
        
        <option selected data-url="https://quiet.github.io/docs/quiet-js/transmitting/">Javascript</option>
        
        <option  data-url="https://quiet.github.io/docs/QuietModemKit/transmitting/">iOS</option>
        
        <option  data-url="https://quiet.github.io/docs/org.QuietModem.Quiet/transmitting/">Android</option>
        
      </select>
    </div>
    <div class="wrapper">
      
        <ul class="repo">
          <li class="repo-download">
            
            <a href="https://github.com/quiet/quiet-js/archive/master.zip" target="_blank" title="Download" data-action="download">
              <i class="icon icon-download"></i> Download
            </a>
          </li>
          <li class="repo-stars">
            <a href="https://github.com/quiet/quiet-js/stargazers" target="_blank" title="Stargazers" data-action="star">
              <i class="icon icon-star"></i> Stars
              <span class="count">&ndash;</span>
            </a>
          </li>
        </ul>
        <hr>
      
      <div class="toc">
        <ul>
          
            <div></div>
            
  <li>
    <a class="" title="Quiet Modem" href="..">
      Quiet Modem
    </a>
    
  </li>

          
            <div></div>
            
  <li>
    <a class="" title="Getting Started" href="../setup/">
      Getting Started
    </a>
    
  </li>

          
            <div></div>
            
  <li>
    <a class="" title="Example" href="../example/">
      Example
    </a>
    
  </li>

          
            <div></div>
            
  <li>
    <a class="" title="How It Works" href="../how/">
      How It Works
    </a>
    
  </li>

          
            <div></div>
            
  <li>
    <a class="current" title="Transmitting Data" href="./">
      Transmitting Data
    </a>
    
      
      
        
      
      
        <ul>
          
            <li class="anchor">
              <a title="Transmitter.transmit" href="#transmittertransmit">
                Transmitter.transmit
              </a>
            </li>
          
            <li class="anchor">
              <a title="Transmitter.destroy" href="#transmitterdestroy">
                Transmitter.destroy
              </a>
            </li>
          
            <li class="anchor">
              <a title="Transmitter.getAverageEncodeTime" href="#transmittergetaverageencodetime">
                Transmitter.getAverageEncodeTime
              </a>
            </li>
          
            <li class="anchor">
              <a title="Quiet.addReadyCallback" href="#quietaddreadycallback">
                Quiet.addReadyCallback
              </a>
            </li>
          
            <li class="anchor">
              <a title="Quiet.init" href="#quietinit">
                Quiet.init
              </a>
            </li>
          
            <li class="anchor">
              <a title="Quiet.transmitter" href="#quiettransmitter">
                Quiet.transmitter
              </a>
            </li>
          
            <li class="anchor">
              <a title="Quiet.receiver" href="#quietreceiver">
                Quiet.receiver
              </a>
            </li>
          
            <li class="anchor">
              <a title="Quiet.str2ab" href="#quietstr2ab">
                Quiet.str2ab
              </a>
            </li>
          
            <li class="anchor">
              <a title="Quiet.ab2str" href="#quietab2str">
                Quiet.ab2str
              </a>
            </li>
          
            <li class="anchor">
              <a title="Quiet.mergeab" href="#quietmergeab">
                Quiet.mergeab
              </a>
            </li>
          
            <li class="anchor">
              <a title="Receiver.destroy" href="#receiverdestroy">
                Receiver.destroy
              </a>
            </li>
          
            <li class="anchor">
              <a title="Receiver.getAverageDecodeTime" href="#receivergetaveragedecodetime">
                Receiver.getAverageDecodeTime
              </a>
            </li>
          
        </ul>
      
    
  </li>

          
            <div></div>
            
  <li>
    <a class="" title="Receiving Data" href="../receiving/">
      Receiving Data
    </a>
    
  </li>

          
            <div></div>
            
  <li>
    <a class="" title="Modem Configuration" href="../configuration/">
      Modem Configuration
    </a>
    
  </li>

          
            <div></div>
            
  <li>
    <a class="" title="Encoding Raw Samples" href="../encoding/">
      Encoding Raw Samples
    </a>
    
  </li>

          
            <div></div>
            
  <li>
    <a class="" title="Decoding Raw Samples" href="../decoding/">
      Decoding Raw Samples
    </a>
    
  </li>

          
            <div></div>
            
  <li>
    <a class="" title="Profiles" href="../profiles/">
      Profiles
    </a>
    
  </li>

          
            <div></div>
            
  <li>
    <a class="" title="Errors" href="../errors/">
      Errors
    </a>
    
  </li>

          
            <div></div>
            
  <li>
    <a class="" title="Frame Stats" href="../frame-stats/">
      Frame Stats
    </a>
    
  </li>

          
        </ul>
        
      </div>
    </div>
  </div>
</nav>
      </div>
      <article class="article">
        <div class="wrapper">
          
          <h1 id="transmitting-data">Transmitting Data</h1>
<h2 id="transmittertransmit">Transmitter.transmit</h2>
<div class="codehilite"><pre><span></span><span class="nx">Transmitter</span><span class="p">.</span><span class="nx">transmit</span><span class="p">(</span><span class="nx">payload</span><span class="p">)</span>
</pre></div>


<p>Callback for user to provide data to a Quiet transmitter</p>
<h3 id="parameters">Parameters</h3>
<p><code>payload</code> - bytes which will be encoded and sent to speaker</p>
<h2 id="transmitterdestroy">Transmitter.destroy</h2>
<div class="codehilite"><pre><span></span><span class="nx">Transmitter</span><span class="p">.</span><span class="nx">destroy</span><span class="p">()</span>
</pre></div>


<p>immediately stop playback and release all resources</p>
<h2 id="transmittergetaverageencodetime">Transmitter.getAverageEncodeTime</h2>
<div class="codehilite"><pre><span></span><span class="nx">Transmitter</span><span class="p">.</span><span class="nx">getAverageEncodeTime</span><span class="p">()</span>
</pre></div>


<p>returns average time in ms spent encoding data into sound samples over the last 3 runs</p>
<h2 id="quietaddreadycallback">Quiet.addReadyCallback</h2>
<div class="codehilite"><pre><span></span><span class="nx">Quiet</span><span class="p">.</span><span class="nx">addReadyCallback</span><span class="p">(</span><span class="nx">c</span> <span class="p">[,</span>

                       <span class="nx">onError</span><span class="p">])</span>
</pre></div>


<p>Add a callback to be called when Quiet is ready for use, e.g. when transmitters and receivers can be created.</p>
<h3 id="parameters_1">Parameters</h3>
<p><code>c</code> - The user function which will be called</p>
<p><code>onError</code> - User errback function</p>
<h2 id="quietinit">Quiet.init</h2>
<div class="codehilite"><pre><span></span><span class="nx">Quiet</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span><span class="nx">opts</span><span class="p">,</span>

           <span class="nx">opts</span><span class="p">.</span><span class="nx">profilesPrefix</span><span class="p">,</span>

           <span class="nx">opts</span><span class="p">.</span><span class="nx">memoryInitializerPrefix</span> <span class="p">[,</span>

           <span class="nx">opts</span><span class="p">.</span><span class="nx">libfecPrefix</span> <span class="p">[,</span>

           <span class="nx">opts</span><span class="p">.</span><span class="nx">onReady</span> <span class="p">[,</span>

           <span class="nx">opts</span><span class="p">.</span><span class="nx">onError</span><span class="p">]]])</span>
</pre></div>


<p>Initialize Quiet and set up a callback to be called when Quiet is ready</p>
<h3 id="parameters_2">Parameters</h3>
<p><code>opts</code> - configuration options</p>
<p><code>opts.profilesPrefix</code> - path prefix to quiet-profiles.json   this file configures transmitter and receiver parameters</p>
<p><code>opts.memoryInitializerPrefix</code> - path prefix to quiet-emscripten.js.mem</p>
<p><code>opts.libfecPrefix</code> - path prefix to libfec.js</p>
<p><code>opts.onReady</code> - Quiet ready callback</p>
<p><code>opts.onError</code> - User errback function</p>
<h2 id="quiettransmitter">Quiet.transmitter</h2>
<div class="codehilite"><pre><span></span><span class="nx">Quiet</span><span class="p">.</span><span class="nx">transmitter</span><span class="p">(</span><span class="nx">opts</span><span class="p">,</span>

                  <span class="nx">opts</span><span class="p">.</span><span class="nx">profile</span> <span class="p">[,</span>

                  <span class="nx">opts</span><span class="p">.</span><span class="nx">onFinish</span> <span class="p">[,</span>

                  <span class="nx">opts</span><span class="p">.</span><span class="nx">onEnqueue</span> <span class="p">[,</span>

                  <span class="nx">clampFrame</span><span class="p">]]])</span>
</pre></div>


<p>Create a new transmitter configured by the given profile name.</p>
<h3 id="parameters_3">Parameters</h3>
<p><code>opts</code> - transmitter params</p>
<p><code>opts.profile</code> - name of profile to use, must be a key in quiet-profiles.json OR an object which contains a single profile</p>
<p><code>opts.onFinish</code> - user callback which will notify user when playback of all data in queue is complete    if the user calls transmit multiple times before waiting for onFinish, then onFinish will be called only once after    all of the data has been played out</p>
<p><code>opts.onEnqueue</code> - user callback which will notify user when all data passed   to transmit() has been written to the transmit queue and has thus entered the transmit   pipeline. for convenience, quiet.js is designed to hold as much data as you ask it to and   write it to the libquiet transmit queue over time. this callback is handy because it   informs the user that all data resides in libquiet, which is useful if you would like   to stream data to the transmitter. this callback is the appropriate place to stream the   next chunk. doing so will prevent excess memory bloat while maintaining the maximum   transmit throughput. if the user calls transmit multiple times before waiting for   onEnqueue, then onEnqueue will be called only once after all of the data has been   played out</p>
<p><code>clampFrame</code> - Prevent frames from overlapping sample blocks.   Web Audio collects sound samples in blocks, and the browser ensures that each   block plays out smoothly and atomically. However, it is possible for playback   gaps to occur between these blocks due to GC pause or similar conditions.   This is especially common on mobile.</p>
<p>Enabling this flag ensures that data frames do   not overlap these sample blocks so that no playback gaps will occur within a frame,   which greatly degrades error performance. Setting this flag to false will increase   throughput but can significantly increase error rate. Defaults to true.</p>
<h3 id="returns">Returns</h3>
<ul>
<li>Transmitter object</li>
</ul>
<h2 id="quietreceiver">Quiet.receiver</h2>
<div class="codehilite"><pre><span></span><span class="nx">Quiet</span><span class="p">.</span><span class="nx">receiver</span><span class="p">(</span><span class="nx">opts</span><span class="p">,</span>

               <span class="nx">opts</span><span class="p">.</span><span class="nx">profile</span><span class="p">,</span>

               <span class="nx">opts</span><span class="p">.</span><span class="nx">onReceive</span> <span class="p">[,</span>

               <span class="nx">opts</span><span class="p">.</span><span class="nx">onCreate</span> <span class="p">[,</span>

               <span class="nx">opts</span><span class="p">.</span><span class="nx">onCreateFail</span> <span class="p">[,</span>

               <span class="nx">opts</span><span class="p">.</span><span class="nx">onReceiveFail</span> <span class="p">[,</span>

               <span class="nx">opts</span><span class="p">.</span><span class="nx">onReceiverStatsUpdate</span><span class="p">]]]])</span>
</pre></div>


<p>Create a new receiver with the profile specified by profile (should match profile of transmitter).</p>
<h3 id="parameters_4">Parameters</h3>
<p><code>opts</code> - receiver params</p>
<p><code>opts.profile</code> - name of profile to use, must be a key in quiet-profiles.json OR an object which contains a complete profile</p>
<p><code>opts.onReceive</code> - callback which receiver will call to send user received data</p>
<p><code>opts.onCreate</code> - callback to notify user that receiver has been created and is ready to receive. if the user needs to grant permission to use the microphone, this callback fires after that permission is granted.</p>
<p><code>opts.onCreateFail</code> - callback to notify user that receiver could not be created</p>
<p><code>opts.onReceiveFail</code> - callback to notify user that receiver received corrupted data</p>
<p><code>opts.onReceiverStatsUpdate</code> - callback to notify user with new decode stats</p>
<h3 id="returns_1">Returns</h3>
<ul>
<li>Receiver object</li>
</ul>
<h2 id="quietstr2ab">Quiet.str2ab</h2>
<div class="codehilite"><pre><span></span><span class="nx">Quiet</span><span class="p">.</span><span class="nx">str2ab</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span>
</pre></div>


<p>Convert a string to array buffer in UTF8</p>
<h3 id="parameters_5">Parameters</h3>
<p><code>s</code> - string to be converted</p>
<h3 id="returns_2">Returns</h3>
<p>buf - converted arraybuffer</p>
<h2 id="quietab2str">Quiet.ab2str</h2>
<div class="codehilite"><pre><span></span><span class="nx">Quiet</span><span class="p">.</span><span class="nx">ab2str</span><span class="p">(</span><span class="nx">ab</span><span class="p">)</span>
</pre></div>


<p>Convert an array buffer in UTF8 to string</p>
<h3 id="parameters_6">Parameters</h3>
<p><code>ab</code> - array buffer to be converted</p>
<h3 id="returns_3">Returns</h3>
<p>s - converted string</p>
<h2 id="quietmergeab">Quiet.mergeab</h2>
<div class="codehilite"><pre><span></span><span class="nx">Quiet</span><span class="p">.</span><span class="nx">mergeab</span><span class="p">(</span><span class="nx">ab1</span><span class="p">,</span>

              <span class="nx">ab2</span><span class="p">)</span>
</pre></div>


<p>Merge 2 ArrayBuffers This is a convenience function to assist user receiver functions that want to aggregate multiple payloads.</p>
<h3 id="parameters_7">Parameters</h3>
<p><code>ab1</code> - beginning ArrayBuffer</p>
<p><code>ab2</code> - ending ArrayBuffer</p>
<h3 id="returns_4">Returns</h3>
<p>buf - ab1 merged with ab2</p>
<h2 id="receiverdestroy">Receiver.destroy</h2>
<div class="codehilite"><pre><span></span><span class="nx">Receiver</span><span class="p">.</span><span class="nx">destroy</span><span class="p">()</span>
</pre></div>


<p>immediately stop sampling microphone and release all resources</p>
<h2 id="receivergetaveragedecodetime">Receiver.getAverageDecodeTime</h2>
<div class="codehilite"><pre><span></span><span class="nx">Receiver</span><span class="p">.</span><span class="nx">getAverageDecodeTime</span><span class="p">()</span>
</pre></div>


<p>returns average time in ms spent decoding data from sound samples over the last 3 runs</p>
          <aside class="copyright" role="note">
            
            Documentation built with
            <a href="http://www.mkdocs.org" target="_blank">MkDocs</a>
            using the
            <a href="http://squidfunk.github.io/mkdocs-material/" target="_blank">
              Material
            </a>
            theme.
          </aside>
          
            <footer class="footer">
              
  <nav class="pagination" aria-label="Footer">
    <div class="previous">
      
        <a href="../how/" title="How It Works">
          <span class="direction">
            Previous
          </span>
          <div class="page">
            <div class="button button-previous" role="button" aria-label="Previous">
              <i class="icon icon-back"></i>
            </div>
            <div class="stretch">
              <div class="title">
                How It Works
              </div>
            </div>
          </div>
        </a>
      
    </div>
    <div class="next">
      
        <a href="../receiving/" title="Receiving Data">
          <span class="direction">
            Next
          </span>
          <div class="page">
            <div class="stretch">
              <div class="title">
                Receiving Data
              </div>
            </div>
            <div class="button button-next" role="button" aria-label="Next">
              <i class="icon icon-forward"></i>
            </div>
          </div>
        </a>
      
    </div>
  </nav>

            </footer>
          
        </div>
      </article>
      <div class="results" role="status" aria-live="polite">
        <div class="scrollable">
          <div class="wrapper">
            <div class="meta"></div>
            <div class="list"></div>
          </div>
        </div>
      </div>
    </main>
    <script>
      var base_url = '..';
      var repo_id  = 'quiet/quiet-js';
      var page_url = 'http://localhost:8080/quiet-doc/quiet-js/transmitting/';
    </script>
    <script src="../assets/javascripts/application-997097ee0c.js"></script>
    <script src="../assets/javascripts/select.js"></script>
    
    
  </body>
</html>